import{h as K,w as q,i as J,k as ee,r as N,l as U,m as D,n as H,o as L,p as te,I as ne}from"./index-BArOXBhs.js";var M,W;function re(){return W||(W=1,M={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),M}var se=re();const ae=K(se);var ie=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function Z(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(ae[n[1]]||e.charAt(e.length-2)==="/")&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("-->");return{type:"comment",comment:r!==-1?e.slice(4,r):""}}for(var i=new RegExp(ie),s=null;(s=i.exec(e))!==null;)if(s[0].trim())if(s[1]){var o=s[1].trim(),l=[o,""];o.indexOf("=")>-1&&(l=o.split("=")),t.attrs[l[0]]=l[1],i.lastIndex--}else s[2]&&(t.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return t}var oe=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,le=/^\s*$/,ce=Object.create(null);function X(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?(function(n){var r=[];for(var i in n)r.push(i+'="'+n[i]+'"');return r.length?" "+r.join(" "):""})(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(X,"")+"</"+t.name+">";case"comment":return e+"<!--"+t.comment+"-->"}}var ue={parse:function(e,t){t||(t={}),t.components||(t.components=ce);var n,r=[],i=[],s=-1,o=!1;if(e.indexOf("<")!==0){var l=e.indexOf("<");r.push({type:"text",content:l===-1?e:e.substring(0,l)})}return e.replace(oe,function(c,p){if(o){if(c!=="</"+n.name+">")return;o=!1}var f,A=c.charAt(1)!=="/",C=c.startsWith("<!--"),g=p+c.length,u=e.charAt(g);if(C){var j=Z(c);return s<0?(r.push(j),r):((f=i[s]).children.push(j),r)}if(A&&(s++,(n=Z(c)).type==="tag"&&t.components[n.name]&&(n.type="component",o=!0),n.voidElement||o||!u||u==="<"||n.children.push({type:"text",content:e.slice(g,e.indexOf("<",g))}),s===0&&r.push(n),(f=i[s-1])&&f.children.push(n),i[s]=n),(!A||n.voidElement)&&(s>-1&&(n.voidElement||n.name===c.slice(2,-1))&&(s--,n=s===-1?r:i[s]),!o&&u!=="<"&&u)){f=s===-1?r:i[s].children;var h=e.indexOf("<",g),$=e.slice(g,h===-1?void 0:h);le.test($)&&($=" "),(h>-1&&s+f.length>=0||$!==" ")&&f.push({type:"text",content:$})}}),r},stringify:function(e){return e.reduce(function(t,n){return t+X("",n)},"")}};const z=(e,t)=>{if(!e)return!1;const n=e.props?.children??e.children;return t?n.length>0:!!n},B=e=>{if(!e)return[];const t=e.props?.children??e.children;return e.props?.i18nIsDynamicList?_(t):t},pe=e=>Array.isArray(e)&&e.every(N.isValidElement),_=e=>Array.isArray(e)?e:[e],fe=(e,t)=>{const n={...t};return n.props={...t.props,...e.props},n},me=e=>{const t={};if(!e)return t;const n=r=>{_(r).forEach(s=>{D(s)||(z(s)?n(B(s)):L(s)&&!N.isValidElement(s)&&Object.assign(t,s))})};return n(e),t},Y=(e,t,n,r)=>{if(!e)return"";let i="";const s=_(e),o=t?.transSupportBasicHtmlNodes?t.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((l,c)=>{if(D(l)){i+=`${l}`;return}if(N.isValidElement(l)){const{props:p,type:f}=l,A=Object.keys(p).length,C=o.indexOf(f)>-1,g=p.children;if(!g&&C&&!A){i+=`<${f}/>`;return}if(!g&&(!C||A)||p.i18nIsDynamicList){i+=`<${c}></${c}>`;return}if(C&&A===1&&D(g)){i+=`<${f}>${g}</${f}>`;return}const u=Y(g,t,n,r);i+=`<${c}>${u}</${c}>`;return}if(l===null){H(n,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(L(l)){const{format:p,...f}=l,A=Object.keys(f);if(A.length===1){const C=p?`${A[0]}, ${p}`:A[0];i+=`{{${C}}}`;return}H(n,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:l});return}H(n,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:l})}),i},he=(e,t=[],n={})=>{if(!e)return e;const r=Object.keys(n),i=[...t,...r];let s="",o=0;for(;o<e.length;)if(e[o]==="<"){let l=!1;const c=e.slice(o).match(/^<\/(\d+|[a-zA-Z][a-zA-Z0-9_-]*)>/);if(c){const p=c[1];(/^\d+$/.test(p)||i.includes(p))&&(l=!0,s+=c[0],o+=c[0].length)}if(!l){const p=e.slice(o).match(/^<(\d+|[a-zA-Z][a-zA-Z0-9_-]*)(\s+[\w-]+(?:=(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s*(\/)?>/);if(p){const f=p[1];(/^\d+$/.test(f)||i.includes(f))&&(l=!0,s+=p[0],o+=p[0].length)}}l||(s+="&lt;",o+=1)}else s+=e[o],o+=1;return s},de=(e,t,n,r,i,s,o)=>{if(n==="")return[];const l=i.transKeepBasicHtmlNodesFor||[],c=n&&new RegExp(l.map(d=>`<${d}`).join("|")).test(n);if(!e&&!t&&!c&&!o)return[n];const p=t??{},f=d=>{_(d).forEach(y=>{D(y)||(z(y)?f(B(y)):L(y)&&!N.isValidElement(y)&&Object.assign(p,y))})};f(e);const A=he(n,l,p),C=ue.parse(`<0>${A}</0>`),g={...p,...s},u=(d,O,y)=>{const b=B(d),I=h(b,O.children,y);return pe(b)&&I.length===0||d.props?.i18nIsDynamicList?b:I},j=(d,O,y,b,I)=>{d.dummy?(d.children=O,y.push(N.cloneElement(d,{key:b},I?void 0:O))):y.push(...N.Children.map([d],m=>{const a="data-i18n-is-dynamic-list",V={key:b,[a]:void 0};return m&&m.props&&Object.keys(m.props).forEach(T=>{T==="ref"||T==="children"||T==="i18nIsDynamicList"||T===a||(V[T]=m.props[T])}),N.cloneElement(m,V,I?null:O)}))},h=(d,O,y)=>{const b=_(d);return _(O).reduce((m,a,V)=>{const T=a.children?.[0]?.content&&r.services.interpolator.interpolate(a.children[0].content,g,r.language);if(a.type==="tag"){let x=b[parseInt(a.name,10)];!x&&t&&(x=t[a.name]),y.length===1&&!x&&(x=y[0][a.name]),x||(x={});const k={...a.attrs};o&&Object.keys(k).forEach(E=>{const w=k[E];D(w)&&(k[E]=te(w))});const v=Object.keys(k).length!==0?fe({props:k},x):x,S=N.isValidElement(v),F=S&&z(a,!0)&&!a.voidElement,P=c&&L(v)&&v.dummy&&!S,R=L(t)&&Object.hasOwnProperty.call(t,a.name);if(D(v)){const E=r.services.interpolator.interpolate(v,g,r.language);m.push(E)}else if(z(v)||F){const E=u(v,a,y);j(v,E,m,V)}else if(P){const E=h(b,a.children,y);j(v,E,m,V)}else if(Number.isNaN(parseFloat(a.name)))if(R){const E=u(v,a,y);j(v,E,m,V,a.voidElement)}else if(i.transSupportBasicHtmlNodes&&l.indexOf(a.name)>-1)if(a.voidElement)m.push(N.createElement(a.name,{key:`${a.name}-${V}`}));else{const E=h(b,a.children,y);m.push(N.createElement(a.name,{key:`${a.name}-${V}`},E))}else if(a.voidElement)m.push(`<${a.name} />`);else{const E=h(b,a.children,y);m.push(`<${a.name}>${E}</${a.name}>`)}else if(L(v)&&!S){const E=a.children[0]?T:null;E&&m.push(E)}else j(v,T,m,V,a.children.length!==1||!T)}else if(a.type==="text"){const x=i.transWrapTextNodes,k=typeof i.unescape=="function"?i.unescape:J().unescape,v=o?k(r.services.interpolator.interpolate(a.content,g,r.language)):r.services.interpolator.interpolate(a.content,g,r.language);x?m.push(N.createElement(x,{key:`${a.name}-${V}`},v)):m.push(v)}return m},[])},$=h([{dummy:!0,children:e||[]}],C,_(e||[]));return B($[0])},G=(e,t,n)=>{const r=e.key||t,i=N.cloneElement(e,{key:r});if(!i.props||!i.props.children||n.indexOf(`${t}/>`)<0&&n.indexOf(`${t} />`)<0)return i;function s(){return N.createElement(N.Fragment,null,i)}return N.createElement(s,{key:r})},ye=(e,t)=>e.map((n,r)=>G(n,r,t)),ge=(e,t)=>{const n={};return Object.keys(e).forEach(r=>{Object.assign(n,{[r]:G(e[r],r,t)})}),n},Ee=(e,t,n,r)=>e?Array.isArray(e)?ye(e,t):L(e)?ge(e,t):(q(n,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null,ve=e=>!L(e)||Array.isArray(e)?!1:Object.keys(e).reduce((t,n)=>t&&Number.isNaN(Number.parseFloat(n)),!0);function Ae({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:s={},values:o,defaults:l,components:c,ns:p,i18n:f,t:A,shouldUnescape:C,...g}){const u=f||U();if(!u)return q(u,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),e;const j=A||u.t.bind(u)||(Q=>Q),h={...J(),...u.options?.react};let $=p||j.ns||u.options?.defaultNS;$=D($)?[$]:$||["translation"];const{transDefaultProps:d}=h,O=d?.tOptions?{...d.tOptions,...s}:s,y=C??d?.shouldUnescape,b=d?.values?{...d.values,...o}:o,I=d?.components?{...d.components,...c}:c,m=Y(e,h,u,r),a=l||O?.defaultValue||m||h.transEmptyNodeValue||(typeof r=="function"?ee(r):r),{hashTransKey:V}=h,T=r||(V?V(m||a):m||a);u.options?.interpolation?.defaultVariables?o=b&&Object.keys(b).length>0?{...b,...u.options.interpolation.defaultVariables}:{...u.options.interpolation.defaultVariables}:o=b;const x=me(e);x&&typeof x.count=="number"&&t===void 0&&(t=x.count);const k=o||t!==void 0&&!u.options?.interpolation?.alwaysFormat||!e?O.interpolation:{interpolation:{...O.interpolation,prefix:"#$?",suffix:"?$#"}},v={...O,context:i||O.context,count:t,...o,...k,defaultValue:a,ns:$};let S=T?j(T,v):a;S===T&&a&&(S=a);const F=Ee(I,S,u,r);let P=F||e,R=null;ve(F)&&(R=F,P=e);const E=de(P,R,S,u,h,v,y),w=n??h.defaultTransParent;return w?N.createElement(w,g,E):E}function be({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:s={},values:o,defaults:l,components:c,ns:p,i18n:f,t:A,shouldUnescape:C,...g}){const{i18n:u,defaultNS:j}=N.useContext(ne)||{},h=f||u||U(),$=A||h?.t.bind(h);return Ae({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:s,values:o,defaults:l,components:c,ns:p||$?.ns||j||h?.options?.defaultNS,i18n:h,t:A,shouldUnescape:C,...g})}export{be as T};
