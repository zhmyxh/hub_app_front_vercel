import{r as l,b as g,j as e,a as N,u as S,f as E,c as I,S as x,d as m,m as _,n as C,N as k}from"./index-e5-PSA9g.js";import{S as D}from"./icon-users-C_O6n1pi.js";import{S as W}from"./icon-calendar-BO8XcH_Z.js";import{S as B}from"./SmartImage-CIc0Zkvn.js";import{S as M}from"./icon-warning-BZ4NgUj6.js";const R=s=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...s},l.createElement("rect",{width:24,height:24,fill:"none"}),l.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M12 3.25a.75.75 0 0 1 .75.75v14.19l4.72-4.72a.75.75 0 1 1 1.06 1.06l-6 6a.75.75 0 0 1-1.06 0l-6-6a.75.75 0 1 1 1.06-1.06l4.72 4.72V4a.75.75 0 0 1 .75-.75",clipRule:"evenodd"})),$=s=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...s},l.createElement("rect",{width:24,height:24,fill:"none"}),l.createElement("path",{fill:"#000",d:"M18 12.998h-5v5a1 1 0 0 1-2 0v-5H6a1 1 0 0 1 0-2h5v-5a1 1 0 0 1 2 0v5h5a1 1 0 0 1 0 2"})),A=s=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...s},l.createElement("rect",{width:24,height:24,fill:"none"}),l.createElement("path",{fill:"#000",d:"M18 12.998H6a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2"}));function p({name:s,icon:c,color:d,type:r,action:i,wd:h,size:a}){const{t:n}=g();let o="";return l.useEffect(()=>{r==="main"&&!d&&(o="default-text"),r==="secondary"&&(o="secondary-text"),r==="main"&&d&&(o="white-text")},[]),e.jsxs("button",{className:`button-${r} ${d||""}`,style:{width:h?"100%":"fit-content"},onClick:i,children:[c&&c,e.jsx("span",{className:o,style:{fontSize:a||16},children:s})]})}function T({event:s,handleStep:c,setCurrentOption:d}){const{user:r}=E(),{t:i}=g(),h=a=>{c("forward"),d(a)};return e.jsx("div",{id:"wager-title",children:s?e.jsxs("div",{id:"event-box",children:[e.jsxs("div",{id:"event-info-box",children:[e.jsx("div",{id:"event-image",children:e.jsx(B,{src:s.image_payload,alt:"Event icon",width:85,height:85})}),e.jsxs("div",{id:"event-info",children:[e.jsx("span",{className:"header-text",children:s.question}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:5},children:[e.jsx(W,{className:"icon-default",width:15,height:15}),e.jsx("span",{className:"secondary-text",children:s?.bet_close_date&&I(s.bet_close_date)})]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[e.jsx("span",{className:"secondary-text",children:i("header.placeabet")}),e.jsxs("div",{id:"event-wager-warning",style:{marginBottom:10},children:[e.jsx("div",{style:{width:20,height:20},children:e.jsx(M,{className:"icon-default",width:20,height:20})}),e.jsx("span",{className:"secondary-text",children:i("warning.placeabet")})]}),e.jsx("div",{id:"event-actions",children:s?.options&&s.options.map((a,n)=>e.jsx(p,{name:i("option."+a.name),color:n===0?"b-g":"b-r",wd:!0,action:()=>h(a)}))})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[e.jsx("span",{className:"secondary-text",children:i("header.stats")}),e.jsx("div",{id:"event-wages",children:s?.options&&s.options.map((a,n)=>e.jsxs("div",{className:`event-wage ${n===0?"yes":"no"}`,children:[e.jsxs("span",{className:"secondary-text",children:["«",i("option."+a.name),"»"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"end",gap:6},children:[e.jsx("div",{className:`event-wager-total ${n===0?"yes":"no"}`,children:e.jsxs("span",{className:"header-text",children:[a.percent,"%"]})}),e.jsx("div",{className:`event-wager-total ${n===0?"yes":"no"}`,children:e.jsx(x,{value:a.option_pool,icon:e.jsx(m,{width:18,height:18})})})]})]},n))}),e.jsxs("div",{id:"event-stats",children:[e.jsxs("div",{className:"event-stat-box",children:[e.jsx("span",{className:"secondary-text",children:i("header.totalpool")}),e.jsx(x,{value:s.total_pool,icon:e.jsx(m,{width:18,height:18})})]}),e.jsxs("div",{className:"event-stat-box",children:[e.jsx("span",{className:"secondary-text",children:i("header.participants")}),e.jsx(x,{value:s.total_wagers,icon:e.jsx(D,{className:"icon-default",width:18,height:18})})]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[e.jsx("span",{className:"secondary-text",children:i("header.userparticipating")}),s.is_user_participating&&e.jsxs("div",{id:"event-user-info",children:[e.jsxs("div",{id:"event-user-participating",children:[e.jsx(_,{className:"icon-default",width:20,height:20}),e.jsx("span",{className:"secondary-text",children:e.jsx(C,{i18nKey:"definition.userwagers",values:{value:r.username,br:e.jsx("br",{})},components:{b:e.jsx("b",{})}})})]}),e.jsx("div",{className:"event-stats-table",children:e.jsxs("table",{children:[e.jsx("tr",{children:s?.options&&s.options.map((a,n)=>e.jsxs("th",{children:["«",i("option."+a.name),"»"]}))}),e.jsx("tr",{children:s?.options&&s.options.map((a,n)=>e.jsx("td",{children:e.jsx("div",{className:"cell-content",children:e.jsx(x,{value:a.user_wager,icon:e.jsx(m,{width:18,height:18})})})}))})]})})]})]})]}):e.jsx(k,{})})}function F({currentOption:s}){const{t:c}=g(),[d,r]=l.useState(0),i=l.useRef(),h=[20,50,70,100,150,200],a=n=>{n==="add"&&d<500&&r(o=>o+5),n==="reduce"&&d>0&&r(o=>o-5),typeof n=="number"&&n<500&&n>0&&r(n),n||r(0)};return l.useEffect(()=>{i.current&&(i.current.value=d)},[d]),e.jsxs("div",{id:"wager-buy",children:[e.jsxs("div",{id:"wager-info",children:[e.jsx("span",{className:"secondary-text",children:c("header.youroption")}),e.jsxs("div",{id:"wager-current-option",className:s.name,children:[e.jsxs("span",{className:"header-text",style:{fontWeight:"bold",fontSize:24},children:["«",c("option."+s.name),"»"]}),e.jsxs("span",{className:"secondary-text",children:[c("header.chance"),": ",s.percent,"%"]}),e.jsx(x,{value:s.option_pool,icon:e.jsx(m,{width:18,height:18})})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[e.jsx("span",{className:"secondary-text",children:c("header.amount")}),e.jsxs("div",{id:"wager-bet-amount",children:[e.jsx(m,{width:34,height:34}),e.jsx("input",{ref:i,id:"wager-bet-input",type:"number",placeholder:c("definition.typeamount"),onChange:n=>a(Number(n.currentTarget.value))}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[e.jsx("button",{className:"button-i",onClick:()=>a("add"),children:e.jsx($,{className:"icon-default",width:20,height:20})}),e.jsx("button",{className:"button-i",onClick:()=>a("reduce"),children:e.jsx(A,{className:"icon-default",width:20,height:20})})]})]}),e.jsx("div",{id:"wager-amounts",children:h.map(n=>e.jsx(p,{name:n,type:"alter",size:14,action:()=>a(n)}))})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[e.jsxs("button",{className:"button-main b-b",style:{width:"100%"},disabled:!d,children:[e.jsx("span",{className:"white-text",children:c("header.placeabet")}),e.jsx(x,{value:d,icon:e.jsx(m,{width:18,height:18}),color:"white"})]}),e.jsx(p,{name:c("button.clear"),type:"secondary",wd:!0,action:()=>d>0&&r(0)})]})]})}function z(){return e.jsxs("div",{id:"wager",children:[e.jsxs("div",{id:"wager-status",children:[e.jsx("span",{className:"secondary-text",children:t("header.paymentstatus")}),e.jsx("span",{className:"header-test",children:t("header.success")})]}),e.jsx(p,{name:t("button.back"),type:"main",color:"b-b",wd:!0})]})}function H(){return e.jsxs("div",{id:"wager",children:[e.jsxs("div",{id:"wager-status",children:[e.jsx("span",{className:"secondary-text",children:t("header.paymentstatus")}),e.jsx("span",{className:"header-test",children:t("header.success")})]}),e.jsx(p,{name:t("button.back"),type:"main",color:"b-b",wd:!0})]})}function V(){const{toggleModal:s,modalIndex:c}=N(),{events:d}=S(),{t:r}=g(),[i,h]=l.useState({}),[a,n]=l.useState(1),[o,w]=l.useState({}),[f,y]=l.useState(!0),b=["definition.wagerstep.1","definition.wagerstep.1"];l.useEffect(()=>{const j=d.find(u=>Number(u.event_id)===c);h(j)},[]);const v=j=>{j==="back"&&a>1&&n(u=>u-1),j==="forward"&&a<3&&n(u=>u+1)};return e.jsxs("div",{id:"wager",children:[a===1&&e.jsx(T,{event:i,handleStep:v,setCurrentOption:w}),a===2&&e.jsx(F,{event:i,handleStep:v,currentOption:o,setPaymentStatus:y}),a===4&&f&&e.jsx(z,{}),a===4&&!f&&e.jsx(H,{}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:20},children:[a!==1&&e.jsx("div",{id:"wager-page-buttons",children:e.jsx("button",{className:"button-i",onClick:()=>v("back"),children:e.jsx("div",{style:{transform:"rotate(90deg)",display:"flex"},children:e.jsx(R,{className:"icon-default",width:20,height:20})})})}),e.jsxs("span",{className:"secondary-text",children:[e.jsxs("b",{children:[r("header.step")," ",a,"."]})," ",r(b[a-1])]})]})]})}export{V as default};
